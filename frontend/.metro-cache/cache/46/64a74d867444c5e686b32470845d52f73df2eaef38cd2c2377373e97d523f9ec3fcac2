{"dependencies":[{"name":"../../native/config/PlatformHelper","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":23,"index":136},"end":{"line":4,"column":68,"index":181}}],"key":"XSy5rD/H/Vqi7gnNwRugADmxSxM=","exportNames":["*"],"imports":1}},{"name":"../../utils/AverageWindow","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":22,"index":205},"end":{"line":5,"column":58,"index":241}}],"key":"tmONry2Y6SpAf3V1Nv6+QBctPRU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.RenderTimeTracker = void 0;\n  var PlatformHelper_1 = require(_dependencyMap[0], \"../../native/config/PlatformHelper\");\n  var AverageWindow_1 = require(_dependencyMap[1], \"../../utils/AverageWindow\");\n  var RenderTimeTracker = /** @class */function () {\n    function RenderTimeTracker() {\n      this.renderTimeAvgWindow = new AverageWindow_1.AverageWindow(5);\n      this.lastTimerStartedAt = -1;\n      this.maxRenderTime = 32; // TODO: Improve this even more\n      this.defaultRenderTime = 16;\n      this.rendersWithoutCommit = 0;\n      this.maxRendersWithoutCommit = 40;\n    }\n    RenderTimeTracker.prototype.startTracking = function () {\n      this.rendersWithoutCommit++;\n      if (!PlatformHelper_1.PlatformConfig.trackAverageRenderTimeForOffsetProjection) {\n        return;\n      }\n      if (this.lastTimerStartedAt === -1) {\n        this.lastTimerStartedAt = Date.now();\n      }\n    };\n    RenderTimeTracker.prototype.markRenderComplete = function () {\n      this.rendersWithoutCommit = 0;\n      if (!PlatformHelper_1.PlatformConfig.trackAverageRenderTimeForOffsetProjection) {\n        return;\n      }\n      if (this.lastTimerStartedAt !== -1) {\n        this.renderTimeAvgWindow.addValue(Date.now() - this.lastTimerStartedAt);\n        this.lastTimerStartedAt = -1;\n      }\n    };\n    RenderTimeTracker.prototype.hasExceededMaxRendersWithoutCommit = function () {\n      return this.rendersWithoutCommit >= this.maxRendersWithoutCommit;\n    };\n    RenderTimeTracker.prototype.getRawValue = function () {\n      return this.renderTimeAvgWindow.currentValue;\n    };\n    RenderTimeTracker.prototype.getAverageRenderTime = function () {\n      if (!PlatformHelper_1.PlatformConfig.trackAverageRenderTimeForOffsetProjection) {\n        return this.defaultRenderTime;\n      }\n      return Math.min(this.maxRenderTime, Math.max(Math.round(this.renderTimeAvgWindow.currentValue), 16));\n    };\n    return RenderTimeTracker;\n  }();\n  exports.RenderTimeTracker = RenderTimeTracker;\n});","lineCount":53,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"RenderTimeTracker"],[7,27,3,25],[7,30,3,28],[7,35,3,33],[7,36,3,34],[8,2,4,0],[8,6,4,4,"PlatformHelper_1"],[8,22,4,20],[8,25,4,23,"require"],[8,32,4,30],[8,33,4,30,"_dependencyMap"],[8,47,4,30],[8,88,4,67],[8,89,4,68],[9,2,5,0],[9,6,5,4,"AverageWindow_1"],[9,21,5,19],[9,24,5,22,"require"],[9,31,5,29],[9,32,5,29,"_dependencyMap"],[9,46,5,29],[9,78,5,57],[9,79,5,58],[10,2,6,0],[10,6,6,4,"RenderTimeTracker"],[10,23,6,21],[10,26,6,24],[10,39,6,39],[10,51,6,51],[11,4,7,4],[11,13,7,13,"RenderTimeTracker"],[11,30,7,30,"RenderTimeTracker"],[11,31,7,30],[11,33,7,33],[12,6,8,8],[12,10,8,12],[12,11,8,13,"renderTimeAvgWindow"],[12,30,8,32],[12,33,8,35],[12,37,8,39,"AverageWindow_1"],[12,52,8,54],[12,53,8,55,"AverageWindow"],[12,66,8,68],[12,67,8,69],[12,68,8,70],[12,69,8,71],[13,6,9,8],[13,10,9,12],[13,11,9,13,"lastTimerStartedAt"],[13,29,9,31],[13,32,9,34],[13,33,9,35],[13,34,9,36],[14,6,10,8],[14,10,10,12],[14,11,10,13,"maxRenderTime"],[14,24,10,26],[14,27,10,29],[14,29,10,31],[14,30,10,32],[14,31,10,33],[15,6,11,8],[15,10,11,12],[15,11,11,13,"defaultRenderTime"],[15,28,11,30],[15,31,11,33],[15,33,11,35],[16,6,12,8],[16,10,12,12],[16,11,12,13,"rendersWithoutCommit"],[16,31,12,33],[16,34,12,36],[16,35,12,37],[17,6,13,8],[17,10,13,12],[17,11,13,13,"maxRendersWithoutCommit"],[17,34,13,36],[17,37,13,39],[17,39,13,41],[18,4,14,4],[19,4,15,4,"RenderTimeTracker"],[19,21,15,21],[19,22,15,22,"prototype"],[19,31,15,31],[19,32,15,32,"startTracking"],[19,45,15,45],[19,48,15,48],[19,60,15,60],[20,6,16,8],[20,10,16,12],[20,11,16,13,"rendersWithoutCommit"],[20,31,16,33],[20,33,16,35],[21,6,17,8],[21,10,17,12],[21,11,17,13,"PlatformHelper_1"],[21,27,17,29],[21,28,17,30,"PlatformConfig"],[21,42,17,44],[21,43,17,45,"trackAverageRenderTimeForOffsetProjection"],[21,84,17,86],[21,86,17,88],[22,8,18,12],[23,6,19,8],[24,6,20,8],[24,10,20,12],[24,14,20,16],[24,15,20,17,"lastTimerStartedAt"],[24,33,20,35],[24,38,20,40],[24,39,20,41],[24,40,20,42],[24,42,20,44],[25,8,21,12],[25,12,21,16],[25,13,21,17,"lastTimerStartedAt"],[25,31,21,35],[25,34,21,38,"Date"],[25,38,21,42],[25,39,21,43,"now"],[25,42,21,46],[25,43,21,47],[25,44,21,48],[26,6,22,8],[27,4,23,4],[27,5,23,5],[28,4,24,4,"RenderTimeTracker"],[28,21,24,21],[28,22,24,22,"prototype"],[28,31,24,31],[28,32,24,32,"markRenderComplete"],[28,50,24,50],[28,53,24,53],[28,65,24,65],[29,6,25,8],[29,10,25,12],[29,11,25,13,"rendersWithoutCommit"],[29,31,25,33],[29,34,25,36],[29,35,25,37],[30,6,26,8],[30,10,26,12],[30,11,26,13,"PlatformHelper_1"],[30,27,26,29],[30,28,26,30,"PlatformConfig"],[30,42,26,44],[30,43,26,45,"trackAverageRenderTimeForOffsetProjection"],[30,84,26,86],[30,86,26,88],[31,8,27,12],[32,6,28,8],[33,6,29,8],[33,10,29,12],[33,14,29,16],[33,15,29,17,"lastTimerStartedAt"],[33,33,29,35],[33,38,29,40],[33,39,29,41],[33,40,29,42],[33,42,29,44],[34,8,30,12],[34,12,30,16],[34,13,30,17,"renderTimeAvgWindow"],[34,32,30,36],[34,33,30,37,"addValue"],[34,41,30,45],[34,42,30,46,"Date"],[34,46,30,50],[34,47,30,51,"now"],[34,50,30,54],[34,51,30,55],[34,52,30,56],[34,55,30,59],[34,59,30,63],[34,60,30,64,"lastTimerStartedAt"],[34,78,30,82],[34,79,30,83],[35,8,31,12],[35,12,31,16],[35,13,31,17,"lastTimerStartedAt"],[35,31,31,35],[35,34,31,38],[35,35,31,39],[35,36,31,40],[36,6,32,8],[37,4,33,4],[37,5,33,5],[38,4,34,4,"RenderTimeTracker"],[38,21,34,21],[38,22,34,22,"prototype"],[38,31,34,31],[38,32,34,32,"hasExceededMaxRendersWithoutCommit"],[38,66,34,66],[38,69,34,69],[38,81,34,81],[39,6,35,8],[39,13,35,15],[39,17,35,19],[39,18,35,20,"rendersWithoutCommit"],[39,38,35,40],[39,42,35,44],[39,46,35,48],[39,47,35,49,"maxRendersWithoutCommit"],[39,70,35,72],[40,4,36,4],[40,5,36,5],[41,4,37,4,"RenderTimeTracker"],[41,21,37,21],[41,22,37,22,"prototype"],[41,31,37,31],[41,32,37,32,"getRawValue"],[41,43,37,43],[41,46,37,46],[41,58,37,58],[42,6,38,8],[42,13,38,15],[42,17,38,19],[42,18,38,20,"renderTimeAvgWindow"],[42,37,38,39],[42,38,38,40,"currentValue"],[42,50,38,52],[43,4,39,4],[43,5,39,5],[44,4,40,4,"RenderTimeTracker"],[44,21,40,21],[44,22,40,22,"prototype"],[44,31,40,31],[44,32,40,32,"getAverageRenderTime"],[44,52,40,52],[44,55,40,55],[44,67,40,67],[45,6,41,8],[45,10,41,12],[45,11,41,13,"PlatformHelper_1"],[45,27,41,29],[45,28,41,30,"PlatformConfig"],[45,42,41,44],[45,43,41,45,"trackAverageRenderTimeForOffsetProjection"],[45,84,41,86],[45,86,41,88],[46,8,42,12],[46,15,42,19],[46,19,42,23],[46,20,42,24,"defaultRenderTime"],[46,37,42,41],[47,6,43,8],[48,6,44,8],[48,13,44,15,"Math"],[48,17,44,19],[48,18,44,20,"min"],[48,21,44,23],[48,22,44,24],[48,26,44,28],[48,27,44,29,"maxRenderTime"],[48,40,44,42],[48,42,44,44,"Math"],[48,46,44,48],[48,47,44,49,"max"],[48,50,44,52],[48,51,44,53,"Math"],[48,55,44,57],[48,56,44,58,"round"],[48,61,44,63],[48,62,44,64],[48,66,44,68],[48,67,44,69,"renderTimeAvgWindow"],[48,86,44,88],[48,87,44,89,"currentValue"],[48,99,44,101],[48,100,44,102],[48,102,44,104],[48,104,44,106],[48,105,44,107],[48,106,44,108],[49,4,45,4],[49,5,45,5],[50,4,46,4],[50,11,46,11,"RenderTimeTracker"],[50,28,46,28],[51,2,47,0],[51,3,47,1],[51,4,47,2],[51,5,47,4],[52,2,48,0,"exports"],[52,9,48,7],[52,10,48,8,"RenderTimeTracker"],[52,27,48,25],[52,30,48,28,"RenderTimeTracker"],[52,47,48,45],[53,0,48,46],[53,3]],"functionMap":{"names":["<global>","<anonymous>","RenderTimeTracker","prototype.startTracking","prototype.markRenderComplete","prototype.hasExceededMaxRendersWithoutCommit","prototype.getRawValue","prototype.getAverageRenderTime"],"mappings":"AAA;uCCK;ICC;KDO;gDEC;KFQ;qDGC;KHS;qEIC;KJE;8CKC;KLE;uDMC;KNK;CDE"},"hasCjsExports":true},"type":"js/module"}]}