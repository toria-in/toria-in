{"dependencies":[{"name":"./timeoutManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":20},"end":{"line":2,"column":53,"index":73}}],"key":"pyQHMhdGxfRLqgunhFS/8/ELubI=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":74},"end":{"line":3,"column":54,"index":128}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"Removable\", {\n    enumerable: true,\n    get: function () {\n      return Removable;\n    }\n  });\n  var _timeoutManagerJs = require(_dependencyMap[0], \"./timeoutManager.js\");\n  var _utilsJs = require(_dependencyMap[1], \"./utils.js\");\n  // src/removable.ts\n\n  var Removable = class {\n    #gcTimeout;\n    destroy() {\n      this.clearGcTimeout();\n    }\n    scheduleGc() {\n      this.clearGcTimeout();\n      if ((0, _utilsJs.isValidTimeout)(this.gcTime)) {\n        this.#gcTimeout = _timeoutManagerJs.timeoutManager.setTimeout(() => {\n          this.optionalRemove();\n        }, this.gcTime);\n      }\n    }\n    updateGcTime(newGcTime) {\n      this.gcTime = Math.max(this.gcTime || 0, newGcTime ?? (_utilsJs.isServer ? Infinity : 5 * 60 * 1e3));\n    }\n    clearGcTimeout() {\n      if (this.#gcTimeout) {\n        _timeoutManagerJs.timeoutManager.clearTimeout(this.#gcTimeout);\n        this.#gcTimeout = void 0;\n      }\n    }\n  };\n});","lineCount":40,"map":[[7,2,30,0,"Object"],[7,8,30,0],[7,9,30,0,"defineProperty"],[7,23,30,0],[7,24,30,0,"exports"],[7,31,30,0],[8,4,30,0,"enumerable"],[8,14,30,0],[9,4,30,0,"get"],[9,7,30,0],[9,18,30,0,"get"],[9,19,30,0],[10,6,30,0],[10,13,31,2,"Removable"],[10,22,31,11],[11,4,31,11],[12,2,31,11],[13,2,2,0],[13,6,2,0,"_timeoutManagerJs"],[13,23,2,0],[13,26,2,0,"require"],[13,33,2,0],[13,34,2,0,"_dependencyMap"],[13,48,2,0],[14,2,3,0],[14,6,3,0,"_utilsJs"],[14,14,3,0],[14,17,3,0,"require"],[14,24,3,0],[14,25,3,0,"_dependencyMap"],[14,39,3,0],[15,2,1,0],[17,2,4,0],[17,6,4,4,"Removable"],[17,15,4,13],[17,18,4,16],[17,24,4,22],[18,4,5,2],[18,5,5,3,"gcTimeout"],[18,14,5,12],[19,4,6,2,"destroy"],[19,11,6,9,"destroy"],[19,12,6,9],[19,14,6,12],[20,6,7,4],[20,10,7,8],[20,11,7,9,"clearGcTimeout"],[20,25,7,23],[20,26,7,24],[20,27,7,25],[21,4,8,2],[22,4,9,2,"scheduleGc"],[22,14,9,12,"scheduleGc"],[22,15,9,12],[22,17,9,15],[23,6,10,4],[23,10,10,8],[23,11,10,9,"clearGcTimeout"],[23,25,10,23],[23,26,10,24],[23,27,10,25],[24,6,11,4],[24,10,11,8],[24,14,11,8,"isValidTimeout"],[24,22,11,22],[24,23,11,22,"isValidTimeout"],[24,37,11,22],[24,39,11,23],[24,43,11,27],[24,44,11,28,"gcTime"],[24,50,11,34],[24,51,11,35],[24,53,11,37],[25,8,12,6],[25,12,12,10],[25,13,12,11],[25,14,12,12,"gcTimeout"],[25,23,12,21],[25,26,12,24,"timeoutManager"],[25,43,12,38],[25,44,12,38,"timeoutManager"],[25,58,12,38],[25,59,12,39,"setTimeout"],[25,69,12,49],[25,70,12,50],[25,76,12,56],[26,10,13,8],[26,14,13,12],[26,15,13,13,"optionalRemove"],[26,29,13,27],[26,30,13,28],[26,31,13,29],[27,8,14,6],[27,9,14,7],[27,11,14,9],[27,15,14,13],[27,16,14,14,"gcTime"],[27,22,14,20],[27,23,14,21],[28,6,15,4],[29,4,16,2],[30,4,17,2,"updateGcTime"],[30,16,17,14,"updateGcTime"],[30,17,17,15,"newGcTime"],[30,26,17,24],[30,28,17,26],[31,6,18,4],[31,10,18,8],[31,11,18,9,"gcTime"],[31,17,18,15],[31,20,18,18,"Math"],[31,24,18,22],[31,25,18,23,"max"],[31,28,18,26],[31,29,19,6],[31,33,19,10],[31,34,19,11,"gcTime"],[31,40,19,17],[31,44,19,21],[31,45,19,22],[31,47,20,6,"newGcTime"],[31,56,20,15],[31,61,20,20,"isServer"],[31,69,20,28],[31,70,20,28,"isServer"],[31,78,20,28],[31,81,20,31,"Infinity"],[31,89,20,39],[31,92,20,42],[31,93,20,43],[31,96,20,46],[31,98,20,48],[31,101,20,51],[31,104,20,54],[31,105,21,4],[31,106,21,5],[32,4,22,2],[33,4,23,2,"clearGcTimeout"],[33,18,23,16,"clearGcTimeout"],[33,19,23,16],[33,21,23,19],[34,6,24,4],[34,10,24,8],[34,14,24,12],[34,15,24,13],[34,16,24,14,"gcTimeout"],[34,25,24,23],[34,27,24,25],[35,8,25,6,"timeoutManager"],[35,25,25,20],[35,26,25,20,"timeoutManager"],[35,40,25,20],[35,41,25,21,"clearTimeout"],[35,53,25,33],[35,54,25,34],[35,58,25,38],[35,59,25,39],[35,60,25,40,"gcTimeout"],[35,69,25,49],[35,70,25,50],[36,8,26,6],[36,12,26,10],[36,13,26,11],[36,14,26,12,"gcTimeout"],[36,23,26,21],[36,26,26,24],[36,31,26,29],[36,32,26,30],[37,6,27,4],[38,4,28,2],[39,2,29,0],[39,3,29,1],[40,0,29,2],[40,3]],"functionMap":{"names":["<global>","Removable","Removable#destroy","Removable#scheduleGc","timeoutManager.setTimeout$argument_0","Removable#updateGcTime","Removable#clearGcTimeout"],"mappings":"AAA;gBCG;ECE;GDE;EEC;kDCG;ODE;GFE;EIC;GJK;EKC;GLK;CDC"},"hasCjsExports":false},"type":"js/module"}]}