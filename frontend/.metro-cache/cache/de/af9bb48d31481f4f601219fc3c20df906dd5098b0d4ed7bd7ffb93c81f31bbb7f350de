{"dependencies":[{"name":"../errors/ErrorMessages","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":22,"index":130},"end":{"line":4,"column":56,"index":164}}],"key":"BCiUDpkk5Qncm0nNnI0UNhwvtUQ=","exportNames":["*"],"imports":1}},{"name":"./roundToDecimalPlaces","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":29,"index":195},"end":{"line":5,"column":62,"index":228}}],"key":"wZFOiWjqN8foagWQzFOMacddGWo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.JSFPSMonitor = void 0;\n  var ErrorMessages_1 = require(_dependencyMap[0], \"../errors/ErrorMessages\");\n  var roundToDecimalPlaces_1 = require(_dependencyMap[1], \"./roundToDecimalPlaces\");\n  /**\n   * Can be used to monitor JS thread performance\n   * Use startTracking() and stopAndGetData() to start and stop tracking\n   */\n  var JSFPSMonitor = /** @class */function () {\n    function JSFPSMonitor() {\n      var _this = this;\n      this.startTime = 0;\n      this.frameCount = 0;\n      this.timeWindow = {\n        frameCount: 0,\n        startTime: 0\n      };\n      this.minFPS = Number.MAX_SAFE_INTEGER;\n      this.maxFPS = 0;\n      this.averageFPS = 0;\n      this.clearAnimationNumber = 0;\n      this.updateLoopCompute = function () {\n        _this.frameCount++;\n        var elapsedTime = (Date.now() - _this.startTime) / 1000;\n        _this.averageFPS = elapsedTime > 0 ? _this.frameCount / elapsedTime : 0;\n        _this.timeWindow.frameCount++;\n        var timeWindowElapsedTime = (Date.now() - _this.timeWindow.startTime) / 1000;\n        if (timeWindowElapsedTime >= 1) {\n          var timeWindowAverageFPS = _this.timeWindow.frameCount / timeWindowElapsedTime;\n          _this.minFPS = Math.min(_this.minFPS, timeWindowAverageFPS);\n          _this.maxFPS = Math.max(_this.maxFPS, timeWindowAverageFPS);\n          _this.timeWindow.frameCount = 0;\n          _this.timeWindow.startTime = Date.now();\n        }\n        _this.measureLoop();\n      };\n    }\n    JSFPSMonitor.prototype.measureLoop = function () {\n      // This looks weird but I'm avoiding a new closure\n      this.clearAnimationNumber = requestAnimationFrame(this.updateLoopCompute);\n    };\n    JSFPSMonitor.prototype.startTracking = function () {\n      if (this.startTime !== 0) {\n        throw new Error(ErrorMessages_1.ErrorMessages.fpsMonitorAlreadyRunning);\n      }\n      this.startTime = Date.now();\n      this.timeWindow.startTime = Date.now();\n      this.measureLoop();\n    };\n    JSFPSMonitor.prototype.stopAndGetData = function () {\n      cancelAnimationFrame(this.clearAnimationNumber);\n      if (this.minFPS === Number.MAX_SAFE_INTEGER) {\n        this.minFPS = this.averageFPS;\n        this.maxFPS = this.averageFPS;\n      }\n      return {\n        minFPS: (0, roundToDecimalPlaces_1.roundToDecimalPlaces)(this.minFPS, 1),\n        maxFPS: (0, roundToDecimalPlaces_1.roundToDecimalPlaces)(this.maxFPS, 1),\n        averageFPS: (0, roundToDecimalPlaces_1.roundToDecimalPlaces)(this.averageFPS, 1)\n      };\n    };\n    return JSFPSMonitor;\n  }();\n  exports.JSFPSMonitor = JSFPSMonitor;\n});","lineCount":70,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"JSFPSMonitor"],[7,22,3,20],[7,25,3,23],[7,30,3,28],[7,31,3,29],[8,2,4,0],[8,6,4,4,"ErrorMessages_1"],[8,21,4,19],[8,24,4,22,"require"],[8,31,4,29],[8,32,4,29,"_dependencyMap"],[8,46,4,29],[8,76,4,55],[8,77,4,56],[9,2,5,0],[9,6,5,4,"roundToDecimalPlaces_1"],[9,28,5,26],[9,31,5,29,"require"],[9,38,5,36],[9,39,5,36,"_dependencyMap"],[9,53,5,36],[9,82,5,61],[9,83,5,62],[10,2,6,0],[11,0,7,0],[12,0,8,0],[13,0,9,0],[14,2,10,0],[14,6,10,4,"JSFPSMonitor"],[14,18,10,16],[14,21,10,19],[14,34,10,34],[14,46,10,46],[15,4,11,4],[15,13,11,13,"JSFPSMonitor"],[15,25,11,25,"JSFPSMonitor"],[15,26,11,25],[15,28,11,28],[16,6,12,8],[16,10,12,12,"_this"],[16,15,12,17],[16,18,12,20],[16,22,12,24],[17,6,13,8],[17,10,13,12],[17,11,13,13,"startTime"],[17,20,13,22],[17,23,13,25],[17,24,13,26],[18,6,14,8],[18,10,14,12],[18,11,14,13,"frameCount"],[18,21,14,23],[18,24,14,26],[18,25,14,27],[19,6,15,8],[19,10,15,12],[19,11,15,13,"timeWindow"],[19,21,15,23],[19,24,15,26],[20,8,16,12,"frameCount"],[20,18,16,22],[20,20,16,24],[20,21,16,25],[21,8,17,12,"startTime"],[21,17,17,21],[21,19,17,23],[22,6,18,8],[22,7,18,9],[23,6,19,8],[23,10,19,12],[23,11,19,13,"minFPS"],[23,17,19,19],[23,20,19,22,"Number"],[23,26,19,28],[23,27,19,29,"MAX_SAFE_INTEGER"],[23,43,19,45],[24,6,20,8],[24,10,20,12],[24,11,20,13,"maxFPS"],[24,17,20,19],[24,20,20,22],[24,21,20,23],[25,6,21,8],[25,10,21,12],[25,11,21,13,"averageFPS"],[25,21,21,23],[25,24,21,26],[25,25,21,27],[26,6,22,8],[26,10,22,12],[26,11,22,13,"clearAnimationNumber"],[26,31,22,33],[26,34,22,36],[26,35,22,37],[27,6,23,8],[27,10,23,12],[27,11,23,13,"updateLoopCompute"],[27,28,23,30],[27,31,23,33],[27,43,23,45],[28,8,24,12,"_this"],[28,13,24,17],[28,14,24,18,"frameCount"],[28,24,24,28],[28,26,24,30],[29,8,25,12],[29,12,25,16,"elapsedTime"],[29,23,25,27],[29,26,25,30],[29,27,25,31,"Date"],[29,31,25,35],[29,32,25,36,"now"],[29,35,25,39],[29,36,25,40],[29,37,25,41],[29,40,25,44,"_this"],[29,45,25,49],[29,46,25,50,"startTime"],[29,55,25,59],[29,59,25,63],[29,63,25,67],[30,8,26,12,"_this"],[30,13,26,17],[30,14,26,18,"averageFPS"],[30,24,26,28],[30,27,26,31,"elapsedTime"],[30,38,26,42],[30,41,26,45],[30,42,26,46],[30,45,26,49,"_this"],[30,50,26,54],[30,51,26,55,"frameCount"],[30,61,26,65],[30,64,26,68,"elapsedTime"],[30,75,26,79],[30,78,26,82],[30,79,26,83],[31,8,27,12,"_this"],[31,13,27,17],[31,14,27,18,"timeWindow"],[31,24,27,28],[31,25,27,29,"frameCount"],[31,35,27,39],[31,37,27,41],[32,8,28,12],[32,12,28,16,"timeWindowElapsedTime"],[32,33,28,37],[32,36,28,40],[32,37,28,41,"Date"],[32,41,28,45],[32,42,28,46,"now"],[32,45,28,49],[32,46,28,50],[32,47,28,51],[32,50,28,54,"_this"],[32,55,28,59],[32,56,28,60,"timeWindow"],[32,66,28,70],[32,67,28,71,"startTime"],[32,76,28,80],[32,80,28,84],[32,84,28,88],[33,8,29,12],[33,12,29,16,"timeWindowElapsedTime"],[33,33,29,37],[33,37,29,41],[33,38,29,42],[33,40,29,44],[34,10,30,16],[34,14,30,20,"timeWindowAverageFPS"],[34,34,30,40],[34,37,30,43,"_this"],[34,42,30,48],[34,43,30,49,"timeWindow"],[34,53,30,59],[34,54,30,60,"frameCount"],[34,64,30,70],[34,67,30,73,"timeWindowElapsedTime"],[34,88,30,94],[35,10,31,16,"_this"],[35,15,31,21],[35,16,31,22,"minFPS"],[35,22,31,28],[35,25,31,31,"Math"],[35,29,31,35],[35,30,31,36,"min"],[35,33,31,39],[35,34,31,40,"_this"],[35,39,31,45],[35,40,31,46,"minFPS"],[35,46,31,52],[35,48,31,54,"timeWindowAverageFPS"],[35,68,31,74],[35,69,31,75],[36,10,32,16,"_this"],[36,15,32,21],[36,16,32,22,"maxFPS"],[36,22,32,28],[36,25,32,31,"Math"],[36,29,32,35],[36,30,32,36,"max"],[36,33,32,39],[36,34,32,40,"_this"],[36,39,32,45],[36,40,32,46,"maxFPS"],[36,46,32,52],[36,48,32,54,"timeWindowAverageFPS"],[36,68,32,74],[36,69,32,75],[37,10,33,16,"_this"],[37,15,33,21],[37,16,33,22,"timeWindow"],[37,26,33,32],[37,27,33,33,"frameCount"],[37,37,33,43],[37,40,33,46],[37,41,33,47],[38,10,34,16,"_this"],[38,15,34,21],[38,16,34,22,"timeWindow"],[38,26,34,32],[38,27,34,33,"startTime"],[38,36,34,42],[38,39,34,45,"Date"],[38,43,34,49],[38,44,34,50,"now"],[38,47,34,53],[38,48,34,54],[38,49,34,55],[39,8,35,12],[40,8,36,12,"_this"],[40,13,36,17],[40,14,36,18,"measureLoop"],[40,25,36,29],[40,26,36,30],[40,27,36,31],[41,6,37,8],[41,7,37,9],[42,4,38,4],[43,4,39,4,"JSFPSMonitor"],[43,16,39,16],[43,17,39,17,"prototype"],[43,26,39,26],[43,27,39,27,"measureLoop"],[43,38,39,38],[43,41,39,41],[43,53,39,53],[44,6,40,8],[45,6,41,8],[45,10,41,12],[45,11,41,13,"clearAnimationNumber"],[45,31,41,33],[45,34,41,36,"requestAnimationFrame"],[45,55,41,57],[45,56,41,58],[45,60,41,62],[45,61,41,63,"updateLoopCompute"],[45,78,41,80],[45,79,41,81],[46,4,42,4],[46,5,42,5],[47,4,43,4,"JSFPSMonitor"],[47,16,43,16],[47,17,43,17,"prototype"],[47,26,43,26],[47,27,43,27,"startTracking"],[47,40,43,40],[47,43,43,43],[47,55,43,55],[48,6,44,8],[48,10,44,12],[48,14,44,16],[48,15,44,17,"startTime"],[48,24,44,26],[48,29,44,31],[48,30,44,32],[48,32,44,34],[49,8,45,12],[49,14,45,18],[49,18,45,22,"Error"],[49,23,45,27],[49,24,45,28,"ErrorMessages_1"],[49,39,45,43],[49,40,45,44,"ErrorMessages"],[49,53,45,57],[49,54,45,58,"fpsMonitorAlreadyRunning"],[49,78,45,82],[49,79,45,83],[50,6,46,8],[51,6,47,8],[51,10,47,12],[51,11,47,13,"startTime"],[51,20,47,22],[51,23,47,25,"Date"],[51,27,47,29],[51,28,47,30,"now"],[51,31,47,33],[51,32,47,34],[51,33,47,35],[52,6,48,8],[52,10,48,12],[52,11,48,13,"timeWindow"],[52,21,48,23],[52,22,48,24,"startTime"],[52,31,48,33],[52,34,48,36,"Date"],[52,38,48,40],[52,39,48,41,"now"],[52,42,48,44],[52,43,48,45],[52,44,48,46],[53,6,49,8],[53,10,49,12],[53,11,49,13,"measureLoop"],[53,22,49,24],[53,23,49,25],[53,24,49,26],[54,4,50,4],[54,5,50,5],[55,4,51,4,"JSFPSMonitor"],[55,16,51,16],[55,17,51,17,"prototype"],[55,26,51,26],[55,27,51,27,"stopAndGetData"],[55,41,51,41],[55,44,51,44],[55,56,51,56],[56,6,52,8,"cancelAnimationFrame"],[56,26,52,28],[56,27,52,29],[56,31,52,33],[56,32,52,34,"clearAnimationNumber"],[56,52,52,54],[56,53,52,55],[57,6,53,8],[57,10,53,12],[57,14,53,16],[57,15,53,17,"minFPS"],[57,21,53,23],[57,26,53,28,"Number"],[57,32,53,34],[57,33,53,35,"MAX_SAFE_INTEGER"],[57,49,53,51],[57,51,53,53],[58,8,54,12],[58,12,54,16],[58,13,54,17,"minFPS"],[58,19,54,23],[58,22,54,26],[58,26,54,30],[58,27,54,31,"averageFPS"],[58,37,54,41],[59,8,55,12],[59,12,55,16],[59,13,55,17,"maxFPS"],[59,19,55,23],[59,22,55,26],[59,26,55,30],[59,27,55,31,"averageFPS"],[59,37,55,41],[60,6,56,8],[61,6,57,8],[61,13,57,15],[62,8,58,12,"minFPS"],[62,14,58,18],[62,16,58,20],[62,17,58,21],[62,18,58,22],[62,20,58,24,"roundToDecimalPlaces_1"],[62,42,58,46],[62,43,58,47,"roundToDecimalPlaces"],[62,63,58,67],[62,65,58,69],[62,69,58,73],[62,70,58,74,"minFPS"],[62,76,58,80],[62,78,58,82],[62,79,58,83],[62,80,58,84],[63,8,59,12,"maxFPS"],[63,14,59,18],[63,16,59,20],[63,17,59,21],[63,18,59,22],[63,20,59,24,"roundToDecimalPlaces_1"],[63,42,59,46],[63,43,59,47,"roundToDecimalPlaces"],[63,63,59,67],[63,65,59,69],[63,69,59,73],[63,70,59,74,"maxFPS"],[63,76,59,80],[63,78,59,82],[63,79,59,83],[63,80,59,84],[64,8,60,12,"averageFPS"],[64,18,60,22],[64,20,60,24],[64,21,60,25],[64,22,60,26],[64,24,60,28,"roundToDecimalPlaces_1"],[64,46,60,50],[64,47,60,51,"roundToDecimalPlaces"],[64,67,60,71],[64,69,60,73],[64,73,60,77],[64,74,60,78,"averageFPS"],[64,84,60,88],[64,86,60,90],[64,87,60,91],[65,6,61,8],[65,7,61,9],[66,4,62,4],[66,5,62,5],[67,4,63,4],[67,11,63,11,"JSFPSMonitor"],[67,23,63,23],[68,2,64,0],[68,3,64,1],[68,4,64,2],[68,5,64,4],[69,2,65,0,"exports"],[69,9,65,7],[69,10,65,8,"JSFPSMonitor"],[69,22,65,20],[69,25,65,23,"JSFPSMonitor"],[69,37,65,35],[70,0,65,36],[70,3]],"functionMap":{"names":["<global>","<anonymous>","JSFPSMonitor","updateLoopCompute","prototype.measureLoop","prototype.startTracking","prototype.stopAndGetData"],"mappings":"AAA;kCCS;ICC;iCCY;SDc;KDC;yCGC;KHG;2CIC;KJO;4CKC;KLW;CDE"},"hasCjsExports":true},"type":"js/module"}]}