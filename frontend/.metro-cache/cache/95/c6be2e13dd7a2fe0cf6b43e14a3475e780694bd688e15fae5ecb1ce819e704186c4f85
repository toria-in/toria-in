{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":28,"index":73}}],"key":"dhYnhmtx0Ij5vR3SSIalcSex/FI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useSidecar = useSidecar;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _env = require(_dependencyMap[1], \"./env\");\n  var cache = new WeakMap();\n  var NO_OPTIONS = {};\n  function useSidecar(importer, effect) {\n    var options = effect && effect.options || NO_OPTIONS;\n    if (_env.env.isNode && !options.ssr) {\n      return [null, null];\n    }\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    return useRealSidecar(importer, effect);\n  }\n  function useRealSidecar(importer, effect) {\n    var options = effect && effect.options || NO_OPTIONS;\n    var couldUseCache = _env.env.forceCache || _env.env.isNode && !!options.ssr || !options.async;\n    var _a = (0, _react.useState)(couldUseCache ? function () {\n        return cache.get(importer);\n      } : undefined),\n      Car = _a[0],\n      setCar = _a[1];\n    var _b = (0, _react.useState)(null),\n      error = _b[0],\n      setError = _b[1];\n    (0, _react.useEffect)(function () {\n      if (!Car) {\n        importer().then(function (car) {\n          var resolved = effect ? effect.read() : car.default || car;\n          if (!resolved) {\n            console.error('Sidecar error: with importer', importer);\n            var error_1;\n            if (effect) {\n              console.error('Sidecar error: with medium', effect);\n              error_1 = new Error('Sidecar medium was not found');\n            } else {\n              error_1 = new Error('Sidecar was not found in exports');\n            }\n            setError(function () {\n              return error_1;\n            });\n            throw error_1;\n          }\n          cache.set(importer, resolved);\n          setCar(function () {\n            return resolved;\n          });\n        }, function (e) {\n          return setError(function () {\n            return e;\n          });\n        });\n      }\n    }, []);\n    return [Car, error];\n  }\n});","lineCount":62,"map":[[7,2,5,0,"exports"],[7,9,5,0],[7,10,5,0,"useSidecar"],[7,20,5,0],[7,23,5,0,"useSidecar"],[7,33,5,0],[8,2,1,0],[8,6,1,0,"_react"],[8,12,1,0],[8,15,1,0,"require"],[8,22,1,0],[8,23,1,0,"_dependencyMap"],[8,37,1,0],[9,2,2,0],[9,6,2,0,"_env"],[9,10,2,0],[9,13,2,0,"require"],[9,20,2,0],[9,21,2,0,"_dependencyMap"],[9,35,2,0],[10,2,3,0],[10,6,3,4,"cache"],[10,11,3,9],[10,14,3,12],[10,18,3,16,"WeakMap"],[10,25,3,23],[10,26,3,24],[10,27,3,25],[11,2,4,0],[11,6,4,4,"NO_OPTIONS"],[11,16,4,14],[11,19,4,17],[11,20,4,18],[11,21,4,19],[12,2,5,7],[12,11,5,16,"useSidecar"],[12,21,5,26,"useSidecar"],[12,22,5,27,"importer"],[12,30,5,35],[12,32,5,37,"effect"],[12,38,5,43],[12,40,5,45],[13,4,6,4],[13,8,6,8,"options"],[13,15,6,15],[13,18,6,19,"effect"],[13,24,6,25],[13,28,6,29,"effect"],[13,34,6,35],[13,35,6,36,"options"],[13,42,6,43],[13,46,6,48,"NO_OPTIONS"],[13,56,6,58],[14,4,7,4],[14,8,7,8,"env"],[14,12,7,11],[14,13,7,11,"env"],[14,16,7,11],[14,17,7,12,"isNode"],[14,23,7,18],[14,27,7,22],[14,28,7,23,"options"],[14,35,7,30],[14,36,7,31,"ssr"],[14,39,7,34],[14,41,7,36],[15,6,8,8],[15,13,8,15],[15,14,8,16],[15,18,8,20],[15,20,8,22],[15,24,8,26],[15,25,8,27],[16,4,9,4],[17,4,10,4],[18,4,11,4],[18,11,11,11,"useRealSidecar"],[18,25,11,25],[18,26,11,26,"importer"],[18,34,11,34],[18,36,11,36,"effect"],[18,42,11,42],[18,43,11,43],[19,2,12,0],[20,2,13,0],[20,11,13,9,"useRealSidecar"],[20,25,13,23,"useRealSidecar"],[20,26,13,24,"importer"],[20,34,13,32],[20,36,13,34,"effect"],[20,42,13,40],[20,44,13,42],[21,4,14,4],[21,8,14,8,"options"],[21,15,14,15],[21,18,14,19,"effect"],[21,24,14,25],[21,28,14,29,"effect"],[21,34,14,35],[21,35,14,36,"options"],[21,42,14,43],[21,46,14,48,"NO_OPTIONS"],[21,56,14,58],[22,4,15,4],[22,8,15,8,"couldUseCache"],[22,21,15,21],[22,24,15,24,"env"],[22,28,15,27],[22,29,15,27,"env"],[22,32,15,27],[22,33,15,28,"forceCache"],[22,43,15,38],[22,47,15,43,"env"],[22,51,15,46],[22,52,15,46,"env"],[22,55,15,46],[22,56,15,47,"isNode"],[22,62,15,53],[22,66,15,57],[22,67,15,58],[22,68,15,59,"options"],[22,75,15,66],[22,76,15,67,"ssr"],[22,79,15,71],[22,83,15,75],[22,84,15,76,"options"],[22,91,15,83],[22,92,15,84,"async"],[22,97,15,89],[23,4,16,4],[23,8,16,8,"_a"],[23,10,16,10],[23,13,16,13],[23,17,16,13,"useState"],[23,23,16,21],[23,24,16,21,"useState"],[23,32,16,21],[23,34,16,22,"couldUseCache"],[23,47,16,35],[23,50,16,38],[23,62,16,50],[24,8,16,52],[24,15,16,59,"cache"],[24,20,16,64],[24,21,16,65,"get"],[24,24,16,68],[24,25,16,69,"importer"],[24,33,16,77],[24,34,16,78],[25,6,16,80],[25,7,16,81],[25,10,16,84,"undefined"],[25,19,16,93],[25,20,16,94],[26,6,16,96,"Car"],[26,9,16,99],[26,12,16,102,"_a"],[26,14,16,104],[26,15,16,105],[26,16,16,106],[26,17,16,107],[27,6,16,109,"setCar"],[27,12,16,115],[27,15,16,118,"_a"],[27,17,16,120],[27,18,16,121],[27,19,16,122],[27,20,16,123],[28,4,17,4],[28,8,17,8,"_b"],[28,10,17,10],[28,13,17,13],[28,17,17,13,"useState"],[28,23,17,21],[28,24,17,21,"useState"],[28,32,17,21],[28,34,17,22],[28,38,17,26],[28,39,17,27],[29,6,17,29,"error"],[29,11,17,34],[29,14,17,37,"_b"],[29,16,17,39],[29,17,17,40],[29,18,17,41],[29,19,17,42],[30,6,17,44,"setError"],[30,14,17,52],[30,17,17,55,"_b"],[30,19,17,57],[30,20,17,58],[30,21,17,59],[30,22,17,60],[31,4,18,4],[31,8,18,4,"useEffect"],[31,14,18,13],[31,15,18,13,"useEffect"],[31,24,18,13],[31,26,18,14],[31,38,18,26],[32,6,19,8],[32,10,19,12],[32,11,19,13,"Car"],[32,14,19,16],[32,16,19,18],[33,8,20,12,"importer"],[33,16,20,20],[33,17,20,21],[33,18,20,22],[33,19,20,23,"then"],[33,23,20,27],[33,24,20,28],[33,34,20,38,"car"],[33,37,20,41],[33,39,20,43],[34,10,21,16],[34,14,21,20,"resolved"],[34,22,21,28],[34,25,21,31,"effect"],[34,31,21,37],[34,34,21,40,"effect"],[34,40,21,46],[34,41,21,47,"read"],[34,45,21,51],[34,46,21,52],[34,47,21,53],[34,50,21,56,"car"],[34,53,21,59],[34,54,21,60,"default"],[34,61,21,67],[34,65,21,71,"car"],[34,68,21,74],[35,10,22,16],[35,14,22,20],[35,15,22,21,"resolved"],[35,23,22,29],[35,25,22,31],[36,12,23,20,"console"],[36,19,23,27],[36,20,23,28,"error"],[36,25,23,33],[36,26,23,34],[36,56,23,64],[36,58,23,66,"importer"],[36,66,23,74],[36,67,23,75],[37,12,24,20],[37,16,24,24,"error_1"],[37,23,24,31],[38,12,25,20],[38,16,25,24,"effect"],[38,22,25,30],[38,24,25,32],[39,14,26,24,"console"],[39,21,26,31],[39,22,26,32,"error"],[39,27,26,37],[39,28,26,38],[39,56,26,66],[39,58,26,68,"effect"],[39,64,26,74],[39,65,26,75],[40,14,27,24,"error_1"],[40,21,27,31],[40,24,27,34],[40,28,27,38,"Error"],[40,33,27,43],[40,34,27,44],[40,64,27,74],[40,65,27,75],[41,12,28,20],[41,13,28,21],[41,19,29,25],[42,14,30,24,"error_1"],[42,21,30,31],[42,24,30,34],[42,28,30,38,"Error"],[42,33,30,43],[42,34,30,44],[42,68,30,78],[42,69,30,79],[43,12,31,20],[44,12,32,20,"setError"],[44,20,32,28],[44,21,32,29],[44,33,32,41],[45,14,32,43],[45,21,32,50,"error_1"],[45,28,32,57],[46,12,32,59],[46,13,32,60],[46,14,32,61],[47,12,33,20],[47,18,33,26,"error_1"],[47,25,33,33],[48,10,34,16],[49,10,35,16,"cache"],[49,15,35,21],[49,16,35,22,"set"],[49,19,35,25],[49,20,35,26,"importer"],[49,28,35,34],[49,30,35,36,"resolved"],[49,38,35,44],[49,39,35,45],[50,10,36,16,"setCar"],[50,16,36,22],[50,17,36,23],[50,29,36,35],[51,12,36,37],[51,19,36,44,"resolved"],[51,27,36,52],[52,10,36,54],[52,11,36,55],[52,12,36,56],[53,8,37,12],[53,9,37,13],[53,11,37,15],[53,21,37,25,"e"],[53,22,37,26],[53,24,37,28],[54,10,37,30],[54,17,37,37,"setError"],[54,25,37,45],[54,26,37,46],[54,38,37,58],[55,12,37,60],[55,19,37,67,"e"],[55,20,37,68],[56,10,37,70],[56,11,37,71],[56,12,37,72],[57,8,37,74],[57,9,37,75],[57,10,37,76],[58,6,38,8],[59,4,39,4],[59,5,39,5],[59,7,39,7],[59,9,39,9],[59,10,39,10],[60,4,40,4],[60,11,40,11],[60,12,40,12,"Car"],[60,15,40,15],[60,17,40,17,"error"],[60,22,40,22],[60,23,40,23],[61,2,41,0],[62,0,41,1],[62,3]],"functionMap":{"names":["<global>","useSidecar","useRealSidecar","<anonymous>","useEffect$argument_0","importer.then$argument_0","setError$argument_0","setCar$argument_0","importer.then$argument_1"],"mappings":"AAA;OCI;CDO;AEC;sCCG,2CD;cEE;4BCE;6BCY,+BD;uBEI,gCF;aDC,EI,+BF,yBE,IJ;KFE;CFE"},"hasCjsExports":false},"type":"js/module"}]}