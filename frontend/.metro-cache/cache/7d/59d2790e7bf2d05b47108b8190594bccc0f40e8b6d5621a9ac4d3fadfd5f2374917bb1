{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"8R25577gwLd3n1hFG9VYnRLV9eE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.createMedium = createMedium;\n  exports.createSidecarMedium = createSidecarMedium;\n  var _tslib = require(_dependencyMap[0], \"tslib\");\n  function ItoI(a) {\n    return a;\n  }\n  function innerCreateMedium(defaults, middleware) {\n    if (middleware === void 0) {\n      middleware = ItoI;\n    }\n    var buffer = [];\n    var assigned = false;\n    var medium = {\n      read: function () {\n        if (assigned) {\n          throw new Error('Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.');\n        }\n        if (buffer.length) {\n          return buffer[buffer.length - 1];\n        }\n        return defaults;\n      },\n      useMedium: function (data) {\n        var item = middleware(data, assigned);\n        buffer.push(item);\n        return function () {\n          buffer = buffer.filter(function (x) {\n            return x !== item;\n          });\n        };\n      },\n      assignSyncMedium: function (cb) {\n        assigned = true;\n        while (buffer.length) {\n          var cbs = buffer;\n          buffer = [];\n          cbs.forEach(cb);\n        }\n        buffer = {\n          push: function (x) {\n            return cb(x);\n          },\n          filter: function () {\n            return buffer;\n          }\n        };\n      },\n      assignMedium: function (cb) {\n        assigned = true;\n        var pendingQueue = [];\n        if (buffer.length) {\n          var cbs = buffer;\n          buffer = [];\n          cbs.forEach(cb);\n          pendingQueue = buffer;\n        }\n        var executeQueue = function () {\n          var cbs = pendingQueue;\n          pendingQueue = [];\n          cbs.forEach(cb);\n        };\n        var cycle = function () {\n          return Promise.resolve().then(executeQueue);\n        };\n        cycle();\n        buffer = {\n          push: function (x) {\n            pendingQueue.push(x);\n            cycle();\n          },\n          filter: function (filter) {\n            pendingQueue = pendingQueue.filter(filter);\n            return buffer;\n          }\n        };\n      }\n    };\n    return medium;\n  }\n  function createMedium(defaults, middleware) {\n    if (middleware === void 0) {\n      middleware = ItoI;\n    }\n    return innerCreateMedium(defaults, middleware);\n  }\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  function createSidecarMedium(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var medium = innerCreateMedium(null);\n    medium.options = (0, _tslib.__assign)({\n      async: true,\n      ssr: false\n    }, options);\n    return medium;\n  }\n});","lineCount":104,"map":[[7,2,68,0,"exports"],[7,9,68,0],[7,10,68,0,"createMedium"],[7,22,68,0],[7,25,68,0,"createMedium"],[7,37,68,0],[8,2,73,0,"exports"],[8,9,73,0],[8,10,73,0,"createSidecarMedium"],[8,29,73,0],[8,32,73,0,"createSidecarMedium"],[8,51,73,0],[9,2,1,0],[9,6,1,0,"_tslib"],[9,12,1,0],[9,15,1,0,"require"],[9,22,1,0],[9,23,1,0,"_dependencyMap"],[9,37,1,0],[10,2,2,0],[10,11,2,9,"ItoI"],[10,15,2,13,"ItoI"],[10,16,2,14,"a"],[10,17,2,15],[10,19,2,17],[11,4,3,4],[11,11,3,11,"a"],[11,12,3,12],[12,2,4,0],[13,2,5,0],[13,11,5,9,"innerCreateMedium"],[13,28,5,26,"innerCreateMedium"],[13,29,5,27,"defaults"],[13,37,5,35],[13,39,5,37,"middleware"],[13,49,5,47],[13,51,5,49],[14,4,6,4],[14,8,6,8,"middleware"],[14,18,6,18],[14,23,6,23],[14,28,6,28],[14,29,6,29],[14,31,6,31],[15,6,6,33,"middleware"],[15,16,6,43],[15,19,6,46,"ItoI"],[15,23,6,50],[16,4,6,52],[17,4,7,4],[17,8,7,8,"buffer"],[17,14,7,14],[17,17,7,17],[17,19,7,19],[18,4,8,4],[18,8,8,8,"assigned"],[18,16,8,16],[18,19,8,19],[18,24,8,24],[19,4,9,4],[19,8,9,8,"medium"],[19,14,9,14],[19,17,9,17],[20,6,10,8,"read"],[20,10,10,12],[20,12,10,14],[20,21,10,14,"read"],[20,22,10,14],[20,24,10,26],[21,8,11,12],[21,12,11,16,"assigned"],[21,20,11,24],[21,22,11,26],[22,10,12,16],[22,16,12,22],[22,20,12,26,"Error"],[22,25,12,31],[22,26,12,32],[22,124,12,130],[22,125,12,131],[23,8,13,12],[24,8,14,12],[24,12,14,16,"buffer"],[24,18,14,22],[24,19,14,23,"length"],[24,25,14,29],[24,27,14,31],[25,10,15,16],[25,17,15,23,"buffer"],[25,23,15,29],[25,24,15,30,"buffer"],[25,30,15,36],[25,31,15,37,"length"],[25,37,15,43],[25,40,15,46],[25,41,15,47],[25,42,15,48],[26,8,16,12],[27,8,17,12],[27,15,17,19,"defaults"],[27,23,17,27],[28,6,18,8],[28,7,18,9],[29,6,19,8,"useMedium"],[29,15,19,17],[29,17,19,19],[29,26,19,19,"useMedium"],[29,27,19,29,"data"],[29,31,19,33],[29,33,19,35],[30,8,20,12],[30,12,20,16,"item"],[30,16,20,20],[30,19,20,23,"middleware"],[30,29,20,33],[30,30,20,34,"data"],[30,34,20,38],[30,36,20,40,"assigned"],[30,44,20,48],[30,45,20,49],[31,8,21,12,"buffer"],[31,14,21,18],[31,15,21,19,"push"],[31,19,21,23],[31,20,21,24,"item"],[31,24,21,28],[31,25,21,29],[32,8,22,12],[32,15,22,19],[32,27,22,31],[33,10,23,16,"buffer"],[33,16,23,22],[33,19,23,25,"buffer"],[33,25,23,31],[33,26,23,32,"filter"],[33,32,23,38],[33,33,23,39],[33,43,23,49,"x"],[33,44,23,50],[33,46,23,52],[34,12,23,54],[34,19,23,61,"x"],[34,20,23,62],[34,25,23,67,"item"],[34,29,23,71],[35,10,23,73],[35,11,23,74],[35,12,23,75],[36,8,24,12],[36,9,24,13],[37,6,25,8],[37,7,25,9],[38,6,26,8,"assignSyncMedium"],[38,22,26,24],[38,24,26,26],[38,33,26,26,"assignSyncMedium"],[38,34,26,36,"cb"],[38,36,26,38],[38,38,26,40],[39,8,27,12,"assigned"],[39,16,27,20],[39,19,27,23],[39,23,27,27],[40,8,28,12],[40,15,28,19,"buffer"],[40,21,28,25],[40,22,28,26,"length"],[40,28,28,32],[40,30,28,34],[41,10,29,16],[41,14,29,20,"cbs"],[41,17,29,23],[41,20,29,26,"buffer"],[41,26,29,32],[42,10,30,16,"buffer"],[42,16,30,22],[42,19,30,25],[42,21,30,27],[43,10,31,16,"cbs"],[43,13,31,19],[43,14,31,20,"forEach"],[43,21,31,27],[43,22,31,28,"cb"],[43,24,31,30],[43,25,31,31],[44,8,32,12],[45,8,33,12,"buffer"],[45,14,33,18],[45,17,33,21],[46,10,34,16,"push"],[46,14,34,20],[46,16,34,22],[46,25,34,22,"push"],[46,26,34,32,"x"],[46,27,34,33],[46,29,34,35],[47,12,34,37],[47,19,34,44,"cb"],[47,21,34,46],[47,22,34,47,"x"],[47,23,34,48],[47,24,34,49],[48,10,34,51],[48,11,34,52],[49,10,35,16,"filter"],[49,16,35,22],[49,18,35,24],[49,27,35,24,"filter"],[49,28,35,24],[49,30,35,36],[50,12,35,38],[50,19,35,45,"buffer"],[50,25,35,51],[51,10,35,53],[52,8,36,12],[52,9,36,13],[53,6,37,8],[53,7,37,9],[54,6,38,8,"assignMedium"],[54,18,38,20],[54,20,38,22],[54,29,38,22,"assignMedium"],[54,30,38,32,"cb"],[54,32,38,34],[54,34,38,36],[55,8,39,12,"assigned"],[55,16,39,20],[55,19,39,23],[55,23,39,27],[56,8,40,12],[56,12,40,16,"pendingQueue"],[56,24,40,28],[56,27,40,31],[56,29,40,33],[57,8,41,12],[57,12,41,16,"buffer"],[57,18,41,22],[57,19,41,23,"length"],[57,25,41,29],[57,27,41,31],[58,10,42,16],[58,14,42,20,"cbs"],[58,17,42,23],[58,20,42,26,"buffer"],[58,26,42,32],[59,10,43,16,"buffer"],[59,16,43,22],[59,19,43,25],[59,21,43,27],[60,10,44,16,"cbs"],[60,13,44,19],[60,14,44,20,"forEach"],[60,21,44,27],[60,22,44,28,"cb"],[60,24,44,30],[60,25,44,31],[61,10,45,16,"pendingQueue"],[61,22,45,28],[61,25,45,31,"buffer"],[61,31,45,37],[62,8,46,12],[63,8,47,12],[63,12,47,16,"executeQueue"],[63,24,47,28],[63,27,47,31],[63,36,47,31,"executeQueue"],[63,37,47,31],[63,39,47,43],[64,10,48,16],[64,14,48,20,"cbs"],[64,17,48,23],[64,20,48,26,"pendingQueue"],[64,32,48,38],[65,10,49,16,"pendingQueue"],[65,22,49,28],[65,25,49,31],[65,27,49,33],[66,10,50,16,"cbs"],[66,13,50,19],[66,14,50,20,"forEach"],[66,21,50,27],[66,22,50,28,"cb"],[66,24,50,30],[66,25,50,31],[67,8,51,12],[67,9,51,13],[68,8,52,12],[68,12,52,16,"cycle"],[68,17,52,21],[68,20,52,24],[68,29,52,24,"cycle"],[68,30,52,24],[68,32,52,36],[69,10,52,38],[69,17,52,45,"Promise"],[69,24,52,52],[69,25,52,53,"resolve"],[69,32,52,60],[69,33,52,61],[69,34,52,62],[69,35,52,63,"then"],[69,39,52,67],[69,40,52,68,"executeQueue"],[69,52,52,80],[69,53,52,81],[70,8,52,83],[70,9,52,84],[71,8,53,12,"cycle"],[71,13,53,17],[71,14,53,18],[71,15,53,19],[72,8,54,12,"buffer"],[72,14,54,18],[72,17,54,21],[73,10,55,16,"push"],[73,14,55,20],[73,16,55,22],[73,25,55,22,"push"],[73,26,55,32,"x"],[73,27,55,33],[73,29,55,35],[74,12,56,20,"pendingQueue"],[74,24,56,32],[74,25,56,33,"push"],[74,29,56,37],[74,30,56,38,"x"],[74,31,56,39],[74,32,56,40],[75,12,57,20,"cycle"],[75,17,57,25],[75,18,57,26],[75,19,57,27],[76,10,58,16],[76,11,58,17],[77,10,59,16,"filter"],[77,16,59,22],[77,18,59,24],[77,27,59,24,"filter"],[77,28,59,34,"filter"],[77,34,59,40],[77,36,59,42],[78,12,60,20,"pendingQueue"],[78,24,60,32],[78,27,60,35,"pendingQueue"],[78,39,60,47],[78,40,60,48,"filter"],[78,46,60,54],[78,47,60,55,"filter"],[78,53,60,61],[78,54,60,62],[79,12,61,20],[79,19,61,27,"buffer"],[79,25,61,33],[80,10,62,16],[81,8,63,12],[81,9,63,13],[82,6,64,8],[83,4,65,4],[83,5,65,5],[84,4,66,4],[84,11,66,11,"medium"],[84,17,66,17],[85,2,67,0],[86,2,68,7],[86,11,68,16,"createMedium"],[86,23,68,28,"createMedium"],[86,24,68,29,"defaults"],[86,32,68,37],[86,34,68,39,"middleware"],[86,44,68,49],[86,46,68,51],[87,4,69,4],[87,8,69,8,"middleware"],[87,18,69,18],[87,23,69,23],[87,28,69,28],[87,29,69,29],[87,31,69,31],[88,6,69,33,"middleware"],[88,16,69,43],[88,19,69,46,"ItoI"],[88,23,69,50],[89,4,69,52],[90,4,70,4],[90,11,70,11,"innerCreateMedium"],[90,28,70,28],[90,29,70,29,"defaults"],[90,37,70,37],[90,39,70,39,"middleware"],[90,49,70,49],[90,50,70,50],[91,2,71,0],[92,2,72,0],[93,2,73,7],[93,11,73,16,"createSidecarMedium"],[93,30,73,35,"createSidecarMedium"],[93,31,73,36,"options"],[93,38,73,43],[93,40,73,45],[94,4,74,4],[94,8,74,8,"options"],[94,15,74,15],[94,20,74,20],[94,25,74,25],[94,26,74,26],[94,28,74,28],[95,6,74,30,"options"],[95,13,74,37],[95,16,74,40],[95,17,74,41],[95,18,74,42],[96,4,74,44],[97,4,75,4],[97,8,75,8,"medium"],[97,14,75,14],[97,17,75,17,"innerCreateMedium"],[97,34,75,34],[97,35,75,35],[97,39,75,39],[97,40,75,40],[98,4,76,4,"medium"],[98,10,76,10],[98,11,76,11,"options"],[98,18,76,18],[98,21,76,21],[98,25,76,21,"__assign"],[98,31,76,29],[98,32,76,29,"__assign"],[98,40,76,29],[98,42,76,30],[99,6,76,32,"async"],[99,11,76,37],[99,13,76,39],[99,17,76,43],[100,6,76,45,"ssr"],[100,9,76,48],[100,11,76,50],[101,4,76,56],[101,5,76,57],[101,7,76,59,"options"],[101,14,76,66],[101,15,76,67],[102,4,77,4],[102,11,77,11,"medium"],[102,17,77,17],[103,2,78,0],[104,0,78,1],[104,3]],"functionMap":{"names":["<global>","ItoI","innerCreateMedium","read","useMedium","<anonymous>","buffer.filter$argument_0","assignSyncMedium","buffer.push","buffer.filter","assignMedium","executeQueue","cycle","createMedium","createSidecarMedium"],"mappings":"AAA;ACC;CDE;AEC;cCK;SDQ;mBEC;mBCG;uCCC,mCD;aDC;SFC;0BKC;sBCQ,8BD;wBEC,8BF;SLE;sBQC;+BCS;aDI;wBEC,4DF;sBFG;iBEG;wBDC;iBCG;SRE;CFG;OaC;CbG;OcE;CdK"},"hasCjsExports":false},"type":"js/module"}]}