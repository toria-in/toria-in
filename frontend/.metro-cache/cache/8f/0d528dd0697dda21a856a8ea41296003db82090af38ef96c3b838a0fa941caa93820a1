{"dependencies":[{"name":"./subscribable.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":24},"end":{"line":2,"column":49,"index":73}}],"key":"f0fxTGZggQRtb//cHMvH9AHIWOw=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":74},"end":{"line":3,"column":38,"index":112}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"OnlineManager\", {\n    enumerable: true,\n    get: function () {\n      return OnlineManager;\n    }\n  });\n  Object.defineProperty(exports, \"onlineManager\", {\n    enumerable: true,\n    get: function () {\n      return onlineManager;\n    }\n  });\n  var _subscribableJs = require(_dependencyMap[0], \"./subscribable.js\");\n  var _utilsJs = require(_dependencyMap[1], \"./utils.js\");\n  // src/onlineManager.ts\n\n  var OnlineManager = class extends _subscribableJs.Subscribable {\n    #online = true;\n    #cleanup;\n    #setup;\n    constructor() {\n      super();\n      this.#setup = onOnline => {\n        if (!_utilsJs.isServer && window.addEventListener) {\n          const onlineListener = () => onOnline(true);\n          const offlineListener = () => onOnline(false);\n          window.addEventListener(\"online\", onlineListener, false);\n          window.addEventListener(\"offline\", offlineListener, false);\n          return () => {\n            window.removeEventListener(\"online\", onlineListener);\n            window.removeEventListener(\"offline\", offlineListener);\n          };\n        }\n        return;\n      };\n    }\n    onSubscribe() {\n      if (!this.#cleanup) {\n        this.setEventListener(this.#setup);\n      }\n    }\n    onUnsubscribe() {\n      if (!this.hasListeners()) {\n        this.#cleanup?.();\n        this.#cleanup = void 0;\n      }\n    }\n    setEventListener(setup) {\n      this.#setup = setup;\n      this.#cleanup?.();\n      this.#cleanup = setup(this.setOnline.bind(this));\n    }\n    setOnline(online) {\n      const changed = this.#online !== online;\n      if (changed) {\n        this.#online = online;\n        this.listeners.forEach(listener => {\n          listener(online);\n        });\n      }\n    }\n    isOnline() {\n      return this.#online;\n    }\n  };\n  var onlineManager = new OnlineManager();\n});","lineCount":73,"map":[[7,2,54,0,"Object"],[7,8,54,0],[7,9,54,0,"defineProperty"],[7,23,54,0],[7,24,54,0,"exports"],[7,31,54,0],[8,4,54,0,"enumerable"],[8,14,54,0],[9,4,54,0,"get"],[9,7,54,0],[9,18,54,0,"get"],[9,19,54,0],[10,6,54,0],[10,13,55,2,"OnlineManager"],[10,26,55,15],[11,4,55,15],[12,2,55,15],[13,2,54,0,"Object"],[13,8,54,0],[13,9,54,0,"defineProperty"],[13,23,54,0],[13,24,54,0,"exports"],[13,31,54,0],[14,4,54,0,"enumerable"],[14,14,54,0],[15,4,54,0,"get"],[15,7,54,0],[15,18,54,0,"get"],[15,19,54,0],[16,6,54,0],[16,13,56,2,"onlineManager"],[16,26,56,15],[17,4,56,15],[18,2,56,15],[19,2,2,0],[19,6,2,0,"_subscribableJs"],[19,21,2,0],[19,24,2,0,"require"],[19,31,2,0],[19,32,2,0,"_dependencyMap"],[19,46,2,0],[20,2,3,0],[20,6,3,0,"_utilsJs"],[20,14,3,0],[20,17,3,0,"require"],[20,24,3,0],[20,25,3,0,"_dependencyMap"],[20,39,3,0],[21,2,1,0],[23,2,4,0],[23,6,4,4,"OnlineManager"],[23,19,4,17],[23,22,4,20],[23,36,4,34,"Subscribable"],[23,51,4,46],[23,52,4,46,"Subscribable"],[23,64,4,46],[23,65,4,47],[24,4,5,2],[24,5,5,3,"online"],[24,11,5,9],[24,14,5,12],[24,18,5,16],[25,4,6,2],[25,5,6,3,"cleanup"],[25,12,6,10],[26,4,7,2],[26,5,7,3,"setup"],[26,10,7,8],[27,4,8,2,"constructor"],[27,15,8,13,"constructor"],[27,16,8,13],[27,18,8,16],[28,6,9,4],[28,11,9,9],[28,12,9,10],[28,13,9,11],[29,6,10,4],[29,10,10,8],[29,11,10,9],[29,12,10,10,"setup"],[29,17,10,15],[29,20,10,19,"onOnline"],[29,28,10,27],[29,32,10,32],[30,8,11,6],[30,12,11,10],[30,13,11,11,"isServer"],[30,21,11,19],[30,22,11,19,"isServer"],[30,30,11,19],[30,34,11,23,"window"],[30,40,11,29],[30,41,11,30,"addEventListener"],[30,57,11,46],[30,59,11,48],[31,10,12,8],[31,16,12,14,"onlineListener"],[31,30,12,28],[31,33,12,31,"onlineListener"],[31,34,12,31],[31,39,12,37,"onOnline"],[31,47,12,45],[31,48,12,46],[31,52,12,50],[31,53,12,51],[32,10,13,8],[32,16,13,14,"offlineListener"],[32,31,13,29],[32,34,13,32,"offlineListener"],[32,35,13,32],[32,40,13,38,"onOnline"],[32,48,13,46],[32,49,13,47],[32,54,13,52],[32,55,13,53],[33,10,14,8,"window"],[33,16,14,14],[33,17,14,15,"addEventListener"],[33,33,14,31],[33,34,14,32],[33,42,14,40],[33,44,14,42,"onlineListener"],[33,58,14,56],[33,60,14,58],[33,65,14,63],[33,66,14,64],[34,10,15,8,"window"],[34,16,15,14],[34,17,15,15,"addEventListener"],[34,33,15,31],[34,34,15,32],[34,43,15,41],[34,45,15,43,"offlineListener"],[34,60,15,58],[34,62,15,60],[34,67,15,65],[34,68,15,66],[35,10,16,8],[35,17,16,15],[35,23,16,21],[36,12,17,10,"window"],[36,18,17,16],[36,19,17,17,"removeEventListener"],[36,38,17,36],[36,39,17,37],[36,47,17,45],[36,49,17,47,"onlineListener"],[36,63,17,61],[36,64,17,62],[37,12,18,10,"window"],[37,18,18,16],[37,19,18,17,"removeEventListener"],[37,38,18,36],[37,39,18,37],[37,48,18,46],[37,50,18,48,"offlineListener"],[37,65,18,63],[37,66,18,64],[38,10,19,8],[38,11,19,9],[39,8,20,6],[40,8,21,6],[41,6,22,4],[41,7,22,5],[42,4,23,2],[43,4,24,2,"onSubscribe"],[43,15,24,13,"onSubscribe"],[43,16,24,13],[43,18,24,16],[44,6,25,4],[44,10,25,8],[44,11,25,9],[44,15,25,13],[44,16,25,14],[44,17,25,15,"cleanup"],[44,24,25,22],[44,26,25,24],[45,8,26,6],[45,12,26,10],[45,13,26,11,"setEventListener"],[45,29,26,27],[45,30,26,28],[45,34,26,32],[45,35,26,33],[45,36,26,34,"setup"],[45,41,26,39],[45,42,26,40],[46,6,27,4],[47,4,28,2],[48,4,29,2,"onUnsubscribe"],[48,17,29,15,"onUnsubscribe"],[48,18,29,15],[48,20,29,18],[49,6,30,4],[49,10,30,8],[49,11,30,9],[49,15,30,13],[49,16,30,14,"hasListeners"],[49,28,30,26],[49,29,30,27],[49,30,30,28],[49,32,30,30],[50,8,31,6],[50,12,31,10],[50,13,31,11],[50,14,31,12,"cleanup"],[50,21,31,19],[50,24,31,22],[50,25,31,23],[51,8,32,6],[51,12,32,10],[51,13,32,11],[51,14,32,12,"cleanup"],[51,21,32,19],[51,24,32,22],[51,29,32,27],[51,30,32,28],[52,6,33,4],[53,4,34,2],[54,4,35,2,"setEventListener"],[54,20,35,18,"setEventListener"],[54,21,35,19,"setup"],[54,26,35,24],[54,28,35,26],[55,6,36,4],[55,10,36,8],[55,11,36,9],[55,12,36,10,"setup"],[55,17,36,15],[55,20,36,18,"setup"],[55,25,36,23],[56,6,37,4],[56,10,37,8],[56,11,37,9],[56,12,37,10,"cleanup"],[56,19,37,17],[56,22,37,20],[56,23,37,21],[57,6,38,4],[57,10,38,8],[57,11,38,9],[57,12,38,10,"cleanup"],[57,19,38,17],[57,22,38,20,"setup"],[57,27,38,25],[57,28,38,26],[57,32,38,30],[57,33,38,31,"setOnline"],[57,42,38,40],[57,43,38,41,"bind"],[57,47,38,45],[57,48,38,46],[57,52,38,50],[57,53,38,51],[57,54,38,52],[58,4,39,2],[59,4,40,2,"setOnline"],[59,13,40,11,"setOnline"],[59,14,40,12,"online"],[59,20,40,18],[59,22,40,20],[60,6,41,4],[60,12,41,10,"changed"],[60,19,41,17],[60,22,41,20],[60,26,41,24],[60,27,41,25],[60,28,41,26,"online"],[60,34,41,32],[60,39,41,37,"online"],[60,45,41,43],[61,6,42,4],[61,10,42,8,"changed"],[61,17,42,15],[61,19,42,17],[62,8,43,6],[62,12,43,10],[62,13,43,11],[62,14,43,12,"online"],[62,20,43,18],[62,23,43,21,"online"],[62,29,43,27],[63,8,44,6],[63,12,44,10],[63,13,44,11,"listeners"],[63,22,44,20],[63,23,44,21,"forEach"],[63,30,44,28],[63,31,44,30,"listener"],[63,39,44,38],[63,43,44,43],[64,10,45,8,"listener"],[64,18,45,16],[64,19,45,17,"online"],[64,25,45,23],[64,26,45,24],[65,8,46,6],[65,9,46,7],[65,10,46,8],[66,6,47,4],[67,4,48,2],[68,4,49,2,"isOnline"],[68,12,49,10,"isOnline"],[68,13,49,10],[68,15,49,13],[69,6,50,4],[69,13,50,11],[69,17,50,15],[69,18,50,16],[69,19,50,17,"online"],[69,25,50,23],[70,4,51,2],[71,2,52,0],[71,3,52,1],[72,2,53,0],[72,6,53,4,"onlineManager"],[72,19,53,17],[72,22,53,20],[72,26,53,24,"OnlineManager"],[72,39,53,37],[72,40,53,38],[72,41,53,39],[73,0,53,40],[73,3]],"functionMap":{"names":["<global>","OnlineManager","OnlineManager#constructor","<anonymous>","onlineListener","offlineListener","OnlineManager#onSubscribe","OnlineManager#onUnsubscribe","OnlineManager#setEventListener","OnlineManager#setOnline","listeners.forEach$argument_0","OnlineManager#isOnline"],"mappings":"AAA;oBCG;ECI;kBCE;+BCE,oBD;gCEC,qBF;KDS;GDC;EKC;GLI;EMC;GNK;EOC;GPI;EQC;6BCI;ODE;GRE;EUC;GVE;CDC"},"hasCjsExports":false},"type":"js/module"}]}