{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"../addEventListener","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":24,"index":188},"end":{"line":6,"column":54,"index":218}}],"key":"wzhmv3P/qeyjh4vSr75VQmSj1S0=","exportNames":["*"],"imports":1}},{"name":"../useLayoutEffect","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":46,"index":266},"end":{"line":7,"column":75,"index":295}}],"key":"HxIzQAipXTMookQgy6cfIVg92no=","exportNames":["*"],"imports":1}},{"name":"../useStable","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":40,"index":338},"end":{"line":8,"column":63,"index":361}}],"key":"aaDEvWA0GIvZ+A0fiMqOQBx8nOs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\").default;\n  exports.__esModule = true;\n  exports.default = useEvent;\n  var _addEventListener = require(_dependencyMap[1], \"../addEventListener\");\n  var _useLayoutEffect = _interopRequireDefault(require(_dependencyMap[2], \"../useLayoutEffect\"));\n  var _useStable = _interopRequireDefault(require(_dependencyMap[3], \"../useStable\"));\n  /**\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * \n   */\n\n  /**\n   * This can be used with any event type include custom events.\n   *\n   * const click = useEvent('click', options);\n   * useEffect(() => {\n   *   click.setListener(target, onClick);\n   *   return () => click.clear();\n   * }).\n   */\n  function useEvent(eventType, options) {\n    var targetListeners = (0, _useStable.default)(() => new Map());\n    var addListener = (0, _useStable.default)(() => {\n      return (target, callback) => {\n        var removeTargetListener = targetListeners.get(target);\n        if (removeTargetListener != null) {\n          removeTargetListener();\n        }\n        if (callback == null) {\n          targetListeners.delete(target);\n          callback = () => {};\n        }\n        var removeEventListener = (0, _addEventListener.addEventListener)(target, eventType, callback, options);\n        targetListeners.set(target, removeEventListener);\n        return removeEventListener;\n      };\n    });\n    (0, _useLayoutEffect.default)(() => {\n      return () => {\n        targetListeners.forEach(removeListener => {\n          removeListener();\n        });\n        targetListeners.clear();\n      };\n    }, [targetListeners]);\n    return addListener;\n  }\n  module.exports = exports.default;\n});","lineCount":56,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,38,3,36],[4,39,3,36,"_dependencyMap"],[4,53,3,36],[4,104,3,83],[4,105,3,84],[4,106,3,85,"default"],[4,113,3,92],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"__esModule"],[5,20,4,18],[5,23,4,21],[5,27,4,25],[6,2,5,0,"exports"],[6,9,5,7],[6,10,5,8,"default"],[6,17,5,15],[6,20,5,18,"useEvent"],[6,28,5,26],[7,2,6,0],[7,6,6,4,"_addEventListener"],[7,23,6,21],[7,26,6,24,"require"],[7,33,6,31],[7,34,6,31,"_dependencyMap"],[7,48,6,31],[7,74,6,53],[7,75,6,54],[8,2,7,0],[8,6,7,4,"_useLayoutEffect"],[8,22,7,20],[8,25,7,23,"_interopRequireDefault"],[8,47,7,45],[8,48,7,46,"require"],[8,55,7,53],[8,56,7,53,"_dependencyMap"],[8,70,7,53],[8,95,7,74],[8,96,7,75],[8,97,7,76],[9,2,8,0],[9,6,8,4,"_useStable"],[9,16,8,14],[9,19,8,17,"_interopRequireDefault"],[9,41,8,39],[9,42,8,40,"require"],[9,49,8,47],[9,50,8,47,"_dependencyMap"],[9,64,8,47],[9,83,8,62],[9,84,8,63],[9,85,8,64],[10,2,9,0],[11,0,10,0],[12,0,11,0],[13,0,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,0,16,0],[19,2,18,0],[20,0,19,0],[21,0,20,0],[22,0,21,0],[23,0,22,0],[24,0,23,0],[25,0,24,0],[26,0,25,0],[27,0,26,0],[28,2,27,0],[28,11,27,9,"useEvent"],[28,19,27,17,"useEvent"],[28,20,27,18,"eventType"],[28,29,27,27],[28,31,27,29,"options"],[28,38,27,36],[28,40,27,38],[29,4,28,2],[29,8,28,6,"targetListeners"],[29,23,28,21],[29,26,28,24],[29,27,28,25],[29,28,28,26],[29,30,28,28,"_useStable"],[29,40,28,38],[29,41,28,39,"default"],[29,48,28,46],[29,50,28,48],[29,56,28,54],[29,60,28,58,"Map"],[29,63,28,61],[29,64,28,62],[29,65,28,63],[29,66,28,64],[30,4,29,2],[30,8,29,6,"addListener"],[30,19,29,17],[30,22,29,20],[30,23,29,21],[30,24,29,22],[30,26,29,24,"_useStable"],[30,36,29,34],[30,37,29,35,"default"],[30,44,29,42],[30,46,29,44],[30,52,29,50],[31,6,30,4],[31,13,30,11],[31,14,30,12,"target"],[31,20,30,18],[31,22,30,20,"callback"],[31,30,30,28],[31,35,30,33],[32,8,31,6],[32,12,31,10,"removeTargetListener"],[32,32,31,30],[32,35,31,33,"targetListeners"],[32,50,31,48],[32,51,31,49,"get"],[32,54,31,52],[32,55,31,53,"target"],[32,61,31,59],[32,62,31,60],[33,8,32,6],[33,12,32,10,"removeTargetListener"],[33,32,32,30],[33,36,32,34],[33,40,32,38],[33,42,32,40],[34,10,33,8,"removeTargetListener"],[34,30,33,28],[34,31,33,29],[34,32,33,30],[35,8,34,6],[36,8,35,6],[36,12,35,10,"callback"],[36,20,35,18],[36,24,35,22],[36,28,35,26],[36,30,35,28],[37,10,36,8,"targetListeners"],[37,25,36,23],[37,26,36,24,"delete"],[37,32,36,30],[37,33,36,31,"target"],[37,39,36,37],[37,40,36,38],[38,10,37,8,"callback"],[38,18,37,16],[38,21,37,19,"callback"],[38,22,37,19],[38,27,37,25],[38,28,37,26],[38,29,37,27],[39,8,38,6],[40,8,39,6],[40,12,39,10,"removeEventListener"],[40,31,39,29],[40,34,39,32],[40,35,39,33],[40,36,39,34],[40,38,39,36,"_addEventListener"],[40,55,39,53],[40,56,39,54,"addEventListener"],[40,72,39,70],[40,74,39,72,"target"],[40,80,39,78],[40,82,39,80,"eventType"],[40,91,39,89],[40,93,39,91,"callback"],[40,101,39,99],[40,103,39,101,"options"],[40,110,39,108],[40,111,39,109],[41,8,40,6,"targetListeners"],[41,23,40,21],[41,24,40,22,"set"],[41,27,40,25],[41,28,40,26,"target"],[41,34,40,32],[41,36,40,34,"removeEventListener"],[41,55,40,53],[41,56,40,54],[42,8,41,6],[42,15,41,13,"removeEventListener"],[42,34,41,32],[43,6,42,4],[43,7,42,5],[44,4,43,2],[44,5,43,3],[44,6,43,4],[45,4,44,2],[45,5,44,3],[45,6,44,4],[45,8,44,6,"_useLayoutEffect"],[45,24,44,22],[45,25,44,23,"default"],[45,32,44,30],[45,34,44,32],[45,40,44,38],[46,6,45,4],[46,13,45,11],[46,19,45,17],[47,8,46,6,"targetListeners"],[47,23,46,21],[47,24,46,22,"forEach"],[47,31,46,29],[47,32,46,30,"removeListener"],[47,46,46,44],[47,50,46,48],[48,10,47,8,"removeListener"],[48,24,47,22],[48,25,47,23],[48,26,47,24],[49,8,48,6],[49,9,48,7],[49,10,48,8],[50,8,49,6,"targetListeners"],[50,23,49,21],[50,24,49,22,"clear"],[50,29,49,27],[50,30,49,28],[50,31,49,29],[51,6,50,4],[51,7,50,5],[52,4,51,2],[52,5,51,3],[52,7,51,5],[52,8,51,6,"targetListeners"],[52,23,51,21],[52,24,51,22],[52,25,51,23],[53,4,52,2],[53,11,52,9,"addListener"],[53,22,52,20],[54,2,53,0],[55,2,54,0,"module"],[55,8,54,6],[55,9,54,7,"exports"],[55,16,54,14],[55,19,54,17,"exports"],[55,26,54,24],[55,27,54,25,"default"],[55,34,54,32],[56,0,54,33],[56,3]],"functionMap":{"names":["<global>","useEvent","<anonymous>","callback","targetListeners.forEach$argument_0"],"mappings":"AAA;AC0B;gDCC,eD;4CCC;mBCQ,QD;GDM;gCCC;8BEE;OFE;GDG;CDE"},"hasCjsExports":true},"type":"js/module"}]}