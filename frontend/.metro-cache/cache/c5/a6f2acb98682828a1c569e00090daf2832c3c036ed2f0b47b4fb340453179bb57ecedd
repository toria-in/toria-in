{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":16,"index":136},"end":{"line":4,"column":32,"index":152}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}},{"name":"./LinkPreviewContext","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":29,"index":183},"end":{"line":5,"column":60,"index":214}}],"key":"aLYFQm4EDGJfSD6i9vRNTM/WlNM=","exportNames":["*"],"imports":1}},{"name":"./utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":16,"index":232},"end":{"line":6,"column":34,"index":250}}],"key":"Arg6QRuIuy5D/jfcnxX1qJiHjX8=","exportNames":["*"],"imports":1}},{"name":"../../global-state/router-store","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":23,"index":275},"end":{"line":7,"column":65,"index":317}}],"key":"34G8cf9eMVuL1UIt4w1T43KGPlk=","exportNames":["*"],"imports":1}},{"name":"../../hooks","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":16,"index":335},"end":{"line":8,"column":38,"index":357}}],"key":"4axDW+gHYZE8GuC1vLdCjsfAmVo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useNextScreenId = useNextScreenId;\n  const react_1 = require(_dependencyMap[0], \"react\");\n  const LinkPreviewContext_1 = require(_dependencyMap[1], \"./LinkPreviewContext\");\n  const utils_1 = require(_dependencyMap[2], \"./utils\");\n  const router_store_1 = require(_dependencyMap[3], \"../../global-state/router-store\");\n  const hooks_1 = require(_dependencyMap[4], \"../../hooks\");\n  function useNextScreenId() {\n    const router = (0, hooks_1.useRouter)();\n    const {\n      setOpenPreviewKey\n    } = (0, LinkPreviewContext_1.useLinkPreviewContext)();\n    const [internalNextScreenId, internalSetNextScreenId] = (0, react_1.useState)();\n    const currentHref = (0, react_1.useRef)(undefined);\n    const [tabPath, setTabPath] = (0, react_1.useState)([]);\n    (0, react_1.useEffect)(() => {\n      // When screen is prefetched, then the root state is updated with the preloaded route.\n      return router_store_1.store.navigationRef.addListener('state', ({\n        data: {\n          state\n        }\n      }) => {\n        // If we have the current href, it means that we prefetched the route\n        if (currentHref.current && state) {\n          const preloadedRoute = (0, utils_1.getPreloadedRouteFromRootStateByHref)(currentHref.current, state);\n          const routeKey = preloadedRoute?.key;\n          const tabPathFromRootState = (0, utils_1.getTabPathFromRootStateByHref)(currentHref.current, state);\n          // Without this timeout react-native does not have enough time to mount the new screen\n          // and thus it will not be found on the native side\n          if (routeKey || tabPathFromRootState.length) {\n            setTimeout(() => {\n              internalSetNextScreenId(routeKey);\n              setOpenPreviewKey(routeKey);\n              setTabPath(tabPathFromRootState);\n            });\n          }\n          // We got the preloaded state, so we can reset the currentHref\n          // to prevent unnecessary processing\n          currentHref.current = undefined;\n        }\n      });\n    }, []);\n    const prefetch = (0, react_1.useCallback)(href => {\n      // Resetting the nextScreenId to undefined\n      internalSetNextScreenId(undefined);\n      router.prefetch(href);\n      currentHref.current = href;\n    }, [router.prefetch]);\n    return [{\n      nextScreenId: internalNextScreenId,\n      tabPath\n    }, prefetch];\n  }\n});","lineCount":59,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"useNextScreenId"],[7,25,3,23],[7,28,3,26,"useNextScreenId"],[7,43,3,41],[8,2,4,0],[8,8,4,6,"react_1"],[8,15,4,13],[8,18,4,16,"require"],[8,25,4,23],[8,26,4,23,"_dependencyMap"],[8,40,4,23],[8,52,4,31],[8,53,4,32],[9,2,5,0],[9,8,5,6,"LinkPreviewContext_1"],[9,28,5,26],[9,31,5,29,"require"],[9,38,5,36],[9,39,5,36,"_dependencyMap"],[9,53,5,36],[9,80,5,59],[9,81,5,60],[10,2,6,0],[10,8,6,6,"utils_1"],[10,15,6,13],[10,18,6,16,"require"],[10,25,6,23],[10,26,6,23,"_dependencyMap"],[10,40,6,23],[10,54,6,33],[10,55,6,34],[11,2,7,0],[11,8,7,6,"router_store_1"],[11,22,7,20],[11,25,7,23,"require"],[11,32,7,30],[11,33,7,30,"_dependencyMap"],[11,47,7,30],[11,85,7,64],[11,86,7,65],[12,2,8,0],[12,8,8,6,"hooks_1"],[12,15,8,13],[12,18,8,16,"require"],[12,25,8,23],[12,26,8,23,"_dependencyMap"],[12,40,8,23],[12,58,8,37],[12,59,8,38],[13,2,9,0],[13,11,9,9,"useNextScreenId"],[13,26,9,24,"useNextScreenId"],[13,27,9,24],[13,29,9,27],[14,4,10,4],[14,10,10,10,"router"],[14,16,10,16],[14,19,10,19],[14,20,10,20],[14,21,10,21],[14,23,10,23,"hooks_1"],[14,30,10,30],[14,31,10,31,"useRouter"],[14,40,10,40],[14,42,10,42],[14,43,10,43],[15,4,11,4],[15,10,11,10],[16,6,11,12,"setOpenPreviewKey"],[17,4,11,30],[17,5,11,31],[17,8,11,34],[17,9,11,35],[17,10,11,36],[17,12,11,38,"LinkPreviewContext_1"],[17,32,11,58],[17,33,11,59,"useLinkPreviewContext"],[17,54,11,80],[17,56,11,82],[17,57,11,83],[18,4,12,4],[18,10,12,10],[18,11,12,11,"internalNextScreenId"],[18,31,12,31],[18,33,12,33,"internalSetNextScreenId"],[18,56,12,56],[18,57,12,57],[18,60,12,60],[18,61,12,61],[18,62,12,62],[18,64,12,64,"react_1"],[18,71,12,71],[18,72,12,72,"useState"],[18,80,12,80],[18,82,12,82],[18,83,12,83],[19,4,13,4],[19,10,13,10,"currentHref"],[19,21,13,21],[19,24,13,24],[19,25,13,25],[19,26,13,26],[19,28,13,28,"react_1"],[19,35,13,35],[19,36,13,36,"useRef"],[19,42,13,42],[19,44,13,44,"undefined"],[19,53,13,53],[19,54,13,54],[20,4,14,4],[20,10,14,10],[20,11,14,11,"tabPath"],[20,18,14,18],[20,20,14,20,"setTabPath"],[20,30,14,30],[20,31,14,31],[20,34,14,34],[20,35,14,35],[20,36,14,36],[20,38,14,38,"react_1"],[20,45,14,45],[20,46,14,46,"useState"],[20,54,14,54],[20,56,14,56],[20,58,14,58],[20,59,14,59],[21,4,15,4],[21,5,15,5],[21,6,15,6],[21,8,15,8,"react_1"],[21,15,15,15],[21,16,15,16,"useEffect"],[21,25,15,25],[21,27,15,27],[21,33,15,33],[22,6,16,8],[23,6,17,8],[23,13,17,15,"router_store_1"],[23,27,17,29],[23,28,17,30,"store"],[23,33,17,35],[23,34,17,36,"navigationRef"],[23,47,17,49],[23,48,17,50,"addListener"],[23,59,17,61],[23,60,17,62],[23,67,17,69],[23,69,17,71],[23,70,17,72],[24,8,17,74,"data"],[24,12,17,78],[24,14,17,80],[25,10,17,82,"state"],[26,8,17,88],[27,6,17,90],[27,7,17,91],[27,12,17,96],[28,8,18,12],[29,8,19,12],[29,12,19,16,"currentHref"],[29,23,19,27],[29,24,19,28,"current"],[29,31,19,35],[29,35,19,39,"state"],[29,40,19,44],[29,42,19,46],[30,10,20,16],[30,16,20,22,"preloadedRoute"],[30,30,20,36],[30,33,20,39],[30,34,20,40],[30,35,20,41],[30,37,20,43,"utils_1"],[30,44,20,50],[30,45,20,51,"getPreloadedRouteFromRootStateByHref"],[30,81,20,87],[30,83,20,89,"currentHref"],[30,94,20,100],[30,95,20,101,"current"],[30,102,20,108],[30,104,20,110,"state"],[30,109,20,115],[30,110,20,116],[31,10,21,16],[31,16,21,22,"routeKey"],[31,24,21,30],[31,27,21,33,"preloadedRoute"],[31,41,21,47],[31,43,21,49,"key"],[31,46,21,52],[32,10,22,16],[32,16,22,22,"tabPathFromRootState"],[32,36,22,42],[32,39,22,45],[32,40,22,46],[32,41,22,47],[32,43,22,49,"utils_1"],[32,50,22,56],[32,51,22,57,"getTabPathFromRootStateByHref"],[32,80,22,86],[32,82,22,88,"currentHref"],[32,93,22,99],[32,94,22,100,"current"],[32,101,22,107],[32,103,22,109,"state"],[32,108,22,114],[32,109,22,115],[33,10,23,16],[34,10,24,16],[35,10,25,16],[35,14,25,20,"routeKey"],[35,22,25,28],[35,26,25,32,"tabPathFromRootState"],[35,46,25,52],[35,47,25,53,"length"],[35,53,25,59],[35,55,25,61],[36,12,26,20,"setTimeout"],[36,22,26,30],[36,23,26,31],[36,29,26,37],[37,14,27,24,"internalSetNextScreenId"],[37,37,27,47],[37,38,27,48,"routeKey"],[37,46,27,56],[37,47,27,57],[38,14,28,24,"setOpenPreviewKey"],[38,31,28,41],[38,32,28,42,"routeKey"],[38,40,28,50],[38,41,28,51],[39,14,29,24,"setTabPath"],[39,24,29,34],[39,25,29,35,"tabPathFromRootState"],[39,45,29,55],[39,46,29,56],[40,12,30,20],[40,13,30,21],[40,14,30,22],[41,10,31,16],[42,10,32,16],[43,10,33,16],[44,10,34,16,"currentHref"],[44,21,34,27],[44,22,34,28,"current"],[44,29,34,35],[44,32,34,38,"undefined"],[44,41,34,47],[45,8,35,12],[46,6,36,8],[46,7,36,9],[46,8,36,10],[47,4,37,4],[47,5,37,5],[47,7,37,7],[47,9,37,9],[47,10,37,10],[48,4,38,4],[48,10,38,10,"prefetch"],[48,18,38,18],[48,21,38,21],[48,22,38,22],[48,23,38,23],[48,25,38,25,"react_1"],[48,32,38,32],[48,33,38,33,"useCallback"],[48,44,38,44],[48,46,38,47,"href"],[48,50,38,51],[48,54,38,56],[49,6,39,8],[50,6,40,8,"internalSetNextScreenId"],[50,29,40,31],[50,30,40,32,"undefined"],[50,39,40,41],[50,40,40,42],[51,6,41,8,"router"],[51,12,41,14],[51,13,41,15,"prefetch"],[51,21,41,23],[51,22,41,24,"href"],[51,26,41,28],[51,27,41,29],[52,6,42,8,"currentHref"],[52,17,42,19],[52,18,42,20,"current"],[52,25,42,27],[52,28,42,30,"href"],[52,32,42,34],[53,4,43,4],[53,5,43,5],[53,7,43,7],[53,8,43,8,"router"],[53,14,43,14],[53,15,43,15,"prefetch"],[53,23,43,23],[53,24,43,24],[53,25,43,25],[54,4,44,4],[54,11,44,11],[54,12,44,12],[55,6,44,14,"nextScreenId"],[55,18,44,26],[55,20,44,28,"internalNextScreenId"],[55,40,44,48],[56,6,44,50,"tabPath"],[57,4,44,58],[57,5,44,59],[57,7,44,61,"prefetch"],[57,15,44,69],[57,16,44,70],[58,2,45,0],[59,0,45,1],[59,3]],"functionMap":{"names":["<global>","useNextScreenId","<anonymous>","router_store_1.store.navigationRef.addListener$argument_1","setTimeout$argument_0"],"mappings":"AAA;ACQ;2BCM;uECE;+BCS;qBDI;SDM;KDC;8CCC;KDK;CDE"},"hasCjsExports":true},"type":"js/module"}]}